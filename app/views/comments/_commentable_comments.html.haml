.Comments-section
  - if current_user
    = render "comments/new", comment: Comment.new, commentable: commentable
  - else
    .login-to-comment= t('comments.login_to_comment', href: link_to(t('comments.login_href'), new_user_session_path)).html_safe
  .comments
    - if commentable.comments.any?
      = render commentable.comments.order(created_at: :desc).page(comments_page)
      = link_to_next_page commentable.comments.order(created_at: :desc).page(comments_page),
        t('comments.more'),
        param_name: :comments_page,
        params: { :"#{commentable.class.to_s.parameterize}_id" => commentable.id, controller: "comments" },
        class: "next_link",
        remote: true
      = link_to t('comments.all'),
        library_comments_path(commentable),
        class: "all_link",
        remote: true
    - else
      .comments-empty
        = t('comments.no_comments')
